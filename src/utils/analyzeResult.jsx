export const traitGroups = {
  energy: ["calm", "withdraw", "renewal", "simplicity"],
  freedom: ["freedom", "independence", "growth", "explorer"],
  connection: [
    "relationship",
    "connection",
    "giving",
    "caretaker",
    "connector",
    "communication",
  ],
  meaning: ["purpose", "meaning", "legacy", "learner", "builder"],
  thinking: ["logic", "reflection", "innerVoice", "intuition", "perspective"],
  selfWorth: [
    "selfWorth",
    "achievement",
    "resilience",
    "selfGrowth",
    "authenticity",
  ],
};



export const analyzeResult = (answers) => {
  const groupScore = {
    energy: 0, freedom: 0, connection: 0, 
    meaning: 0, thinking: 0, selfWorth: 0
  };

  // 1. รวมคะแนน
  answers.forEach(trait => {
    Object.entries(traitGroups).forEach(([group, traits]) => {
      if (traits.includes(trait)) {
        groupScore[group] += 1;
      }
    });
  });

  const sorted = Object.entries(groupScore)
    .sort((a, b) => b[1] - a[1]);

  const [primaryKey, primaryScore] = sorted[0];
  const [secondaryKey, secondaryScore] = sorted[1];

  const isComplex = (primaryScore - secondaryScore) <= 1;

  return {
    primary: primaryKey,
    secondary: secondaryKey,
    isComplex,
    scores: groupScore
  };
};

export const secondaryNarratives = {
  energy: "ความสงบของคุณช่วยประคองให้มิติด้านอื่นมั่นคงขึ้น",
  freedom: "อิสระที่คุณต้องการ เป็นแรงขับสำคัญที่ทำให้คุณแตกต่าง",
  connection: "ความใส่ใจคนรอบข้างทำให้เป้าหมายของคุณมีความเป็นมนุษย์มากขึ้น",
  meaning: "การค้นหาความหมายทำให้ทุกอย่างที่คุณทำมีน้ำหนักและคุณค่า",
  thinking: "ความช่างคิดทำให้คุณตัดสินใจได้อย่างเฉียบคมและลึกซึ้ง",
  selfWorth: "ความต้องการพิสูจน์ตนเองเป็นเชื้อเพลิงชั้นดีที่ทำให้คุณไม่หยุดนิ่ง"
};

export const resultNarrative = {
  energy: {
    title: "ผู้ต้องการพลังจากความสงบ",
    image: "/images/energy.png",
    story:
      "คุณเหมือนดอกไม้ที่ไม่ต้องการแสงแรงจัด แต่เติบโตได้งดงามในมุมที่เงียบและปลอดภัย พลังของคุณไม่เกิดจากเสียงปรบมือ แต่เกิดจากการได้อยู่กับตัวเองโดยไม่ต้องอธิบายอะไร คุณฟังอารมณ์ตัวเองเก่ง และรู้จังหวะพักก่อนที่จะเหนื่อยเกินไป โลกอาจมองคุณว่าเงียบ แต่จริง ๆ แล้วคุณกำลังรักษารากของหัวใจให้แข็งแรง",
    strength: ["รู้จักดูแลพลังใจ", "ไม่หลงไปกับความวุ่นวายของโลก"],
    caution: ["ปิดโลกนานเกินไป", "ลังเลที่จะขอความช่วยเหลือ"],
  },

  freedom: {
    title: "ผู้โหยหาอิสระ",
    image: "/images/freedom.png",

    story:
      "คุณเหมือนนกที่หายใจได้เต็มปอดเฉพาะตอนที่ฟ้ากว้าง ต่อให้กรงนั้นดูปลอดภัยหรือสวยงามแค่ไหน ถ้ามันไม่ใช่สิ่งที่คุณเลือกเอง คุณจะอึดอัดทันที คุณต้องการชีวิตที่เคลื่อนไหวได้ตามจังหวะของตัวเอง เส้นทางที่ดีสำหรับคุณ ไม่จำเป็นต้องถูกต้องในสายตาใคร แค่ต้องซื่อสัตย์กับหัวใจของคุณก็พอ",
    strength: ["กล้าตัดสินใจ", "ไม่ยึดติดกรอบ"],
    caution: ["ต่อต้านทุกอย่าง", "เบื่อง่าย"],
  },

  connection: {
    title: "ผู้ให้คุณค่ากับความสัมพันธ์",
    image: "/images/connection.png",
    story:
"คุณเหมือนผ้าห่มที่คอยห่มให้คนอื่นในวันที่หนาว คุณรู้สึกมีคุณค่าเมื่อได้ดูแล และได้ถูกเข้าใจ ความสัมพันธ์ไม่ใช่แค่เรื่องของคนอื่นสำหรับคุณ แต่มันคือที่ที่หัวใจคุณได้พัก คุณอ่านอารมณ์คนเก่ง และรับฟังอย่างไม่ตัดสิน เพียงแต่อย่าลืมว่า ผ้าห่มเองก็ต้องการความอบอุ่นเช่นกัน",
    strength: ["เข้าอกเข้าใจ", "อบอุ่น"],
    caution: ["ลืมตัวเอง", "กลัวการถูกทิ้ง"],
  },

  meaning: {
    title: "ผู้ขับเคลื่อนด้วยความหมาย",
    image: "/images/meaning.png",
    story: "คุณไม่สามารถใช้ชีวิตแบบผ่านไปวัน ๆ ได้ เหมือนเทียนที่มีไส้ แต่ถ้าไม่มีไฟ มันก็ไม่ส่องสว่าง ทุกสิ่งที่คุณทำ ต้องสอดคล้องกับคุณค่าข้างใน คุณต้องรู้ว่า 'ทำไปเพื่ออะไร' ไม่ใช่แค่ 'ทำตามหน้าที่' เมื่อคุณหลงทาง คุณจะไม่เหนื่อยเพราะงานหนัก แต่เหนื่อยเพราะใจไม่รู้ว่ากำลังเดินไปไหน",
    strength: ["มีเป้าหมายชัดเจน", "มุ่งมั่น"],
    caution: ["กดดันตัวเอง", "รู้สึกว่างเปล่า"],
  },

  thinking: {
    title: "ผู้คิดลึกและทบทวน",
    image: "/images/thinking.png",
    story:
"คุณเหมือนกระจกใสที่ไม่รีบสะท้อนภาพ คุณหยุด มอง และคิด ก่อนจะตัดสินใจ คุณเชื่อว่าความเข้าใจที่แท้จริง ต้องมาจากการฟังทั้งเหตุผลและเสียงในใจ คุณไม่กลัวความเงียบ เพราะในนั้นมีคำตอบ เพียงแต่อย่าปล่อยให้การคิด กลายเป็นกำแพงที่ทำให้คุณไม่กล้าก้าวออกไป",
    strength: ["รอบคอบ", "เข้าใจตัวเองลึก"],
    caution: ["คิดมาก", "ลงมือช้า"],
  },

  selfWorth: {
    title: "ผู้เติบโตเพื่อพิสูจน์คุณค่า",
    image: "/images/selfWorth.png",
    story: "คุณเหมือนต้นไม้ที่พยายามเติบโตให้สูงขึ้นทุกวัน เพราะลึก ๆ กลัวว่าจะยังไม่แข็งแรงพอ คุณเชื่อว่าความสำเร็จจะทำให้ปลอดภัย และการหยุดพักคือความเสี่ยง คุณมีวินัยและแรงผลักดันสูง แต่บางครั้งก็ลืมถามตัวเองว่า… เหนื่อยไหม การเติบโตที่แท้จริง ไม่ใช่แค่สูงขึ้น แต่คือการหยั่งรากให้ลึกด้วย",
    strength: ["มุ่งมั่น", "มีวินัย"],
    caution: ["กดดันตัวเอง", "พักไม่เป็น"],
  },
};
